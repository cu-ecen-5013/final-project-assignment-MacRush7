#include <syslog.h>
#include <iolib.c>
#include <stdio.h>
#include <stdint.h>
#include <unistd.h>

#define LedPin    	14	
#define ButtonPin 	16	
#define header		9

#define BUF_SIZE	100
#define NUM_IMAGES	6

uint32_t fingerprintBuffer[BUF_SIZE];

// fingerprint commands... see reference
uint32_t GetImage[] = {0xEF, 0x01, 0xFF, 0xFF, 0xFF, 0xFF, 0x01, 0x00, 0x03, 0x01, 0x00, 0x05};
uint32_t GenChar[] = {0xEF, 0x01, 0xFF, 0xFF, 0xFF, 0xFF, 0x01, 0x00, 0x04, 0x02, 0x01, 0x00, 0x00};
uint32_t RegModel[] = {0xEF, 0x01, 0xFF, 0xFF, 0xFF, 0xFF, 0x01, 0x00, 0x03, 0x05, 0x00, 0x09};
uint32_t StoreChar[] = {0xEF, 0x01, 0xFF, 0xFF, 0xFF, 0xFF, 0x01, 0x00, 0x06, 0x06, 0x01, 0x00, 0x01, 0x00, 0x0F};
uint32_t Search[] = {0xEF, 0x01, 0xFF, 0xFF, 0xFF, 0xFF, 0x01, 0x00, 0x08, 0x04, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00};
//uint32_t DeleteChar[] = {0xEF, 0x01, 0xFF, 0xFF, 0xFF, 0xFF, 0x01, 0x00, 0x07, 0x0C, 0x00, 0x05, 0x00, 0x0A, 0x00, 0x23};
//uint32_t Empty[] = {0xEF, 0x01, 0xFF, 0xFF, 0xFF, 0xFF, 0x01, 0x00, 0x03, 0x0D, 0x00, 0x11};
	
// cmd lengths
uint32_t GetImgageLength = sizeof(GetImage)/sizeof(GetImage[0]);
uint32_t GenCharLength = sizeof(GenChar)/sizeof(GenChar[0]);
uint32_t RegModelLength = sizeof(RegModel)/sizeof(RegModel[0]);
uint32_t StoreCharLength = sizeof(StoreCharLength)/sizeof(StoreCharLength);
uint32_t SearchLength = sizeof(Search)/sizeof(Search[0]);
//uint32_t DeleteCharLength = sizeof(DeleteChar)/sizeof(DeleteChar);
//uint32_t EmptyLength = sizeof(Empty)/sizeof(Empty[0]);

int checkButton();
int checksum(uint32_t cmd[], uint32_t length);
void clearBuffer();
